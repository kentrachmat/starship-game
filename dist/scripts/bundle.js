(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e+"../"})();const e=t.p+"images/vaisseau-ballon-petit.png";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,r,o,i){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n(this,t),this.image=this.createImage(o),this._x=e,this._y=r,this.deltaX=u,this.deltaY=c,this._width=i,this.destroyed=!1}var e,o,u;return e=t,(o=[{key:"draw",value:function(t){t.drawImage(this.image,this._x,this._y)}},{key:"move",value:function(){this._x+=this.deltaX,this._y+=this.deltaY}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"isIn",value:function(t){return i(0,this._x,t.width)&&i(0,this._y,t.height)}},{key:"createImage",value:function(t){var e=new Image;return e.src=t,e.width=this._width,e}}])&&r(e.prototype,o),u&&r(e,u),t}(),i=function(t,e,n){return t<=e&&e<=n};function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=f(t);if(e){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),t}var p,v,d,m=Symbol("immobile"),b=Symbol("up"),g=Symbol("down"),w=function(){function t(){l(this,t)}return y(t,null,[{key:"IMMOBILE",get:function(){return m}},{key:"UP",get:function(){return b}},{key:"DOWN",get:function(){return g}}]),t}(),_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(r,t);var n=a(r);function r(t){var o;return l(this,r),(o=n.call(this,40,t,e,r.WIDTH,0,8)).moving=w.IMMOBILE,o}return y(r,[{key:"up",get:function(){return this.moving===w.UP}},{key:"down",get:function(){return this.moving===w.DOWN}},{key:"moveUp",value:function(){this.deltaY=-Math.abs(this.deltaY),this.moving=w.UP}},{key:"moveDown",value:function(){this.deltaY=+Math.abs(this.deltaY),this.moving=w.DOWN}},{key:"move",value:function(t){this.moving===w.UP&&(this._y=Math.max(0,this._y+this.deltaY)),this.moving===w.DOWN&&(this._y=Math.min(t.height-this.image.height,this._y+this.deltaY))}},{key:"stopMoving",value:function(){this.moving=w.IMMOBILE}}]),r}(o);d=30,(v="WIDTH")in(p=_)?Object.defineProperty(p,v,{value:d,enumerable:!0,configurable:!0,writable:!0}):p[v]=d;const k=t.p+"images/flyingSaucer-petit.png";function O(t){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return(I=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function D(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=j(t);if(e){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(t,e){return!e||"object"!==O(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function j(t){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&I(t,e)}(i,t);var e,n,r,o=D(i);function i(t,e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t,e,k,i.WIDTH,-3,0)}return e=i,(n=[{key:"destroy",value:function(){this.destroyed=!0}},{key:"fall",value:function(){this._x+=0,this._y+=3}},{key:"move",value:function(t){this.destroyed?this.fall():this._x+=this.deltaX}}])&&E(e.prototype,n),r&&E(e,r),i}(o);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(P,"WIDTH",36);const x=t.p+"images/tir.png",M=t.p+"images/bleu.png",T=t.p+"images/gris.png";function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t,e){return(B=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=U(t);if(e){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return W(this,n)}}function W(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&B(t,e)}(i,t);var e,n,r,o=H(i);function i(t,e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var r=Array.from(document.getElementsByName("tir")).find((function(t){return t.checked})).value;return 1==r?n=o.call(this,t,e,x,i.WIDTH,8,0):2==r?n=o.call(this,t,e,M,i.WIDTH,8,0):3==r&&(n=o.call(this,t,e,T,i.WIDTH,8,0)),W(n)}return e=i,(n=[{key:"detecter",value:function(t){var e=Math.max(this._x,t._x),n=Math.max(this._y,t._y),r=Math.min(this._x+i.WIDTH,t._x+t._width),o=Math.min(this._y+i.WIDTH,t._y+t._width);return e<r&&n<o}},{key:"destroyHit",value:function(t){var e=this;t.forEach((function(t){e.detecter(t)&&!t.isDestroyed()&&(t.destroy(),e.destroyed=!0)}))}}])&&A(e.prototype,n),r&&A(e,r),i}(o);function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(L,"WIDTH",10);var N=document.getElementById("score"),C=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e.getContext("2d"),this.canva=e,this.vaisseau=new _(Math.floor(e.height/2)),this.soucoupes=new Array,this.tir=new Array,this.score=0,this.infinity=null}var e,n,r;return e=t,(n=[{key:"moveAndDraw",value:function(){var t=this;this.context.clearRect(0,0,this.canva.width,this.canva.height),this.vaisseau.move(this.canva),this.vaisseau.draw(this.context),this.tir.forEach((function(e){e.destroyHit(t.soucoupes),e.destroyed&&(t.score+=200)})),this.tir=this.tir.filter((function(t){return!t.isDestroyed()})),this.soucoupes=this.soucoupes.filter((function(e){return e.isIn(t.canva)||e.isDestroyed()||(t.score-=1e3),e.isIn(t.canva)})),this.soucoupes.forEach((function(e){e.move(t.canva),e.draw(t.context)})),this.tir=this.tir.filter((function(e){return e.isIn(t.canva)})),this.tir.forEach((function(e){e.move(t.canva),e.draw(t.context)})),N.innerHTML=this.score;var e=Array.from(document.getElementsByName("back")).find((function(t){return t.checked})).value,n=document.getElementById("stars");"ciel"==e?n.style.backgroundImage="url('../images/ciel-nocturne.png')":"ville"==e?n.style.backgroundImage="url('../images/dessert.png')":"foret"==e&&(n.style.backgroundImage="url('../images/plain.png')"),window.requestAnimationFrame(this.moveAndDraw.bind(this))}},{key:"addEnemy",value:function(){var t=Math.floor(Math.random()*(this.canva.height-31)+1);this.soucoupes.push(new P(this.canva.width,t))}},{key:"multipleShip",value:function(){null===this.infinity?this.infinity=window.setInterval(this.infinityShips.bind(this),750):(clearInterval(this.infinity),this.infinity=null)}},{key:"infinityShips",value:function(){X()&&this.addEnemy()}},{key:"shoot",value:function(){this.tir.push(new L(this.vaisseau._x+25,this.vaisseau._y+30))}},{key:"keyDownActionHandler",value:function(t){switch(t.key){case"ArrowDown":case"Down":this.vaisseau.moveDown();break;case"ArrowUp":case"Up":this.vaisseau.moveUp();break;case" ":this.shoot();break;default:return}t.preventDefault()}},{key:"keyUpActionHandler",value:function(t){switch(t.key){case"ArrowDown":case"Down":case"ArrowUp":case"Up":this.vaisseau.stopMoving();break;default:return}t.preventDefault()}}])&&Y(e.prototype,n),r&&Y(e,r),t}(),X=function(){return Math.floor(2*Math.random())};window.addEventListener("load",(function(){var t=document.getElementById("stars"),e=document.getElementById("flotteSoucoupes"),n=document.getElementById("nouvelleSoucoupe"),r=new C(t);window.addEventListener("keydown",r.keyDownActionHandler.bind(r)),window.addEventListener("keyup",r.keyUpActionHandler.bind(r)),n.addEventListener("click",(function(){return r.addEnemy()})),e.addEventListener("click",(function(){return r.multipleShip()})),r.moveAndDraw()})),console.log("le bundle a été généré")})();